# 사용자 시나리오: 화면별 상세 시나리오

**작성자**: Athena PM, Maya Designer  
**작성 일시**: 2024년  
**기반**: PRD v3 (prd/prd_v3.md)

---

## 개요

이 문서는 PRD v3의 화면별 상세 명세를 기반으로 작성된 사용자 시나리오입니다. 각 화면에서 사용자가 수행할 수 있는 모든 동작과 예외 상황을 포함합니다.

---

## 1. 랜딩 페이지 (`/`) 시나리오

### 시나리오 1.1: 신규 사용자의 첫 방문

**Given (전제 조건)**
- 사용자가 FAN:STAGE를 처음 방문함
- 사용자는 로그인하지 않은 상태임
- 사용자는 음악 공유 서비스에 관심이 있음

**When (행동)**
1. 랜딩 페이지에 진입함
2. 히어로 섹션을 스크롤하며 서비스 소개를 읽음
3. "어떤 플랫폼이든 음악을 공유하세요" 메시지를 확인함
4. "편지 만들기" 버튼을 클릭함

**Then (기대 결과)**
- 로그인 페이지로 이동함
- 로그인 후 편지 생성 페이지로 자동 이동할 수 있음

**성공 기준**
- 랜딩 페이지 로딩 시간 2초 이내
- 사용자가 서비스 목적을 10초 이내에 이해함

---

### 시나리오 1.2: 기존 사용자의 방문

**Given (전제 조건)**
- 사용자가 이전에 FAN:STAGE를 사용한 적이 있음
- 사용자는 로그인하지 않은 상태임

**When (행동)**
1. 랜딩 페이지에 진입함
2. 추천 편지 섹션을 확인함
3. 관심 있는 편지 카드를 클릭함

**Then (기대 결과)**
- 편지 상세 페이지로 이동함
- 편지 내용을 확인할 수 있음

---

### 시나리오 1.3: 데모 보기

**Given (전제 조건)**
- 사용자가 랜딩 페이지에 있음
- 사용자는 서비스를 먼저 체험해보고 싶어함

**When (행동)**
1. "데모 보기" 버튼을 클릭함

**Then (기대 결과)**
- 데모 모달 또는 데모 페이지가 표시됨
- 편지 생성 프로세스를 시연할 수 있음

**참고**: P1 기능

---

## 2. 로그인 페이지 (`/login`) 시나리오

### 시나리오 2.1: 신규 사용자 가입 (Google)

**Given (전제 조건)**
- 사용자가 로그인 페이지에 있음
- 사용자는 Google 계정을 보유하고 있음
- 사용자는 FAN:STAGE에 가입한 적이 없음

**When (행동)**
1. "Google 계정으로 계속하기" 버튼을 클릭함
2. Google 인증 팝업에서 계정을 선택함
3. 권한을 승인함

**Then (기대 결과)**
- 로딩 스피너가 표시됨
- 인증이 완료됨
- 온보딩 페이지로 이동함

**성공 기준**
- 로그인 완료 시간 10초 이내
- 가입 전환율 70% 이상

---

### 시나리오 2.2: 기존 사용자 로그인 (Kakao)

**Given (전제 조건)**
- 사용자가 로그인 페이지에 있음
- 사용자는 이전에 Kakao로 가입한 적이 있음

**When (행동)**
1. "카카오로 계속하기" 버튼을 클릭함
2. Kakao 인증을 완료함

**Then (기대 결과)**
- 로그인이 완료됨
- 보관함 페이지로 이동함

---

### 시나리오 2.3: 로그인 실패 (네트워크 오류)

**Given (전제 조건)**
- 사용자가 로그인 페이지에 있음
- 네트워크 연결이 불안정함

**When (행동)**
1. 소셜 로그인 버튼을 클릭함
2. 네트워크 오류가 발생함

**Then (기대 결과)**
- "연결에 실패했습니다. 다시 시도해주세요." 메시지가 표시됨
- 재시도 버튼이 제공됨
- 다른 소셜 로그인 옵션을 선택할 수 있음

---

### 시나리오 2.4: 로그인 취소

**Given (전제 조건)**
- 사용자가 로그인 페이지에 있음

**When (행동)**
1. 소셜 로그인 버튼을 클릭함
2. 인증 팝업에서 "취소"를 선택함

**Then (기대 결과)**
- "로그인이 취소되었습니다." 메시지가 표시됨
- 다시 로그인 버튼을 클릭할 수 있음

---

## 3. 온보딩 페이지 (`/onboarding`) 시나리오

### 시나리오 3.1: 기본 프로필로 시작

**Given (전제 조건)**
- 사용자가 온보딩 페이지에 있음
- 사용자는 소셜 로그인을 완료함

**When (행동)**
1. 닉네임 입력 필드에 "김서연"을 입력함
2. 프로필 이미지는 건너뜀
3. "시작하기" 버튼을 클릭함

**Then (기대 결과)**
- 닉네임이 유효함을 확인함
- 프로필이 저장됨
- 보관함 페이지로 이동함

**성공 기준**
- 온보딩 완료 시간 30초 이내

---

### 시나리오 3.2: 프로필 이미지 포함

**Given (전제 조건)**
- 사용자가 온보딩 페이지에 있음

**When (행동)**
1. 프로필 이미지 업로드 버튼을 클릭함
2. 이미지 파일을 선택함 (JPG, 2MB)
3. 닉네임을 입력함 ("이준호")
4. "시작하기" 버튼을 클릭함

**Then (기대 결과)**
- 이미지가 업로드됨
- 미리보기가 표시됨
- 프로필이 저장됨
- 보관함 페이지로 이동함

---

### 시나리오 3.3: 닉네임 중복

**Given (전제 조건)**
- 사용자가 온보딩 페이지에 있음
- "김서연"이라는 닉네임이 이미 사용 중임

**When (행동)**
1. 닉네임 입력 필드에 "김서연"을 입력함
2. 포커스를 다른 곳으로 이동함 (또는 실시간 검사)

**Then (기대 결과)**
- "이미 사용 중인 닉네임입니다" 메시지가 표시됨
- 다른 닉네임을 입력하도록 안내됨

---

### 시나리오 3.4: 닉네임 유효성 검사 실패

**Given (전제 조건)**
- 사용자가 온보딩 페이지에 있음

**When (행동)**
1. 닉네임 입력 필드에 "A"를 입력함 (1자만 입력)
2. 또는 특수문자 "김서연!"을 입력함

**Then (기대 결과)**
- "닉네임은 2-20자, 한글/영문/숫자만 사용 가능합니다" 메시지가 표시됨
- "시작하기" 버튼이 비활성화됨

---

## 4. 편지 생성 페이지 (`/create`) 시나리오

### 시나리오 4.1: 기본 편지 생성

**Given (전제 조건)**
- 사용자가 로그인되어 있음
- 사용자가 편지 생성 페이지 Step 1에 있음

**When (행동)**
1. 곡 검색 입력 필드에 "겨울 노래"를 입력함
2. 검색 결과에서 곡 3개를 선택하여 추가함
3. 메시지 영역에 "요즘 날씨가 추워지면서 자꾸 듣게 되는 곡들이에요. 추운 겨울밤, 창밖을 보며 들으면 정말 좋아요."를 입력함
4. 공개 설정에서 "비공개"를 선택함
5. "다음" 버튼을 클릭함
6. Step 2에서 링크를 복사함
7. "완료" 버튼을 클릭함

**Then (기대 결과)**
- Step 2로 이동함
- 편지 링크가 생성됨
- QR 코드가 표시됨
- 편지가 저장됨
- 보관함 페이지로 이동함

**성공 기준**
- 편지 생성 완료 시간 3분 이내
- 사용자 만족도 4.0/5.0 이상

---

### 시나리오 4.2: 템플릿을 사용한 편지 생성

**Given (전제 조건)**
- 사용자가 편지 생성 페이지 Step 1에 있음
- 사용자는 생일 축하 편지를 만들고 싶어함

**When (행동)**
1. 곡을 추가함
2. "템플릿 사용" 버튼을 클릭함
3. "생일 축하" 템플릿을 선택함
4. 메시지가 자동으로 입력됨을 확인함
5. 메시지를 수정 및 보완함
6. "다음" 버튼을 클릭함
7. 완료함

**Then (기대 결과)**
- 템플릿 메시지가 입력됨
- 사용자가 메시지를 수정할 수 있음
- 편지가 생성됨

**참고**: P1 기능

---

### 시나리오 4.3: 공개 편지 생성

**Given (전제 조건)**
- 사용자가 편지 생성 페이지 Step 1에 있음
- 사용자는 편지를 공개하고 싶어함

**When (행동)**
1. 곡을 추가하고 메시지를 작성함
2. 공개 설정에서 "비공개" 체크박스를 해제함
3. "다음" 버튼을 클릭함
4. Step 2에서 "전체 공개" 상태를 확인함
5. 완료함

**Then (기대 결과)**
- 편지가 공개됨
- 둘러보기 페이지에 표시됨
- 누구나 편지를 볼 수 있음

---

### 시나리오 4.4: 편지 수정

**Given (전제 조건)**
- 사용자가 편지 생성 페이지 Step 2에 있음
- 사용자는 편지를 수정하고 싶어함

**When (행동)**
1. "수정하기" 버튼을 클릭함
2. Step 1로 돌아감
3. 곡을 추가함
4. 메시지를 수정함
5. "다음" 버튼을 클릭함
6. 완료함

**Then (기대 결과)**
- Step 1로 이동함
- 기존 입력 내용이 유지됨
- 수정된 내용이 반영됨

---

### 시나리오 4.5: 곡 검색 실패

**Given (전제 조건)**
- 사용자가 편지 생성 페이지 Step 1에 있음
- 검색어에 해당하는 곡이 없음

**When (행동)**
1. 곡 검색 입력 필드에 "존재하지않는곡123"을 입력함

**Then (기대 결과)**
- "검색 결과가 없습니다" 메시지가 표시됨
- 다른 검색어를 입력하도록 안내됨

---

## 5. 보관함 페이지 (`/inbox`) 시나리오

### 시나리오 5.1: 받은 편지 확인

**Given (전제 조건)**
- 사용자가 로그인되어 있음
- 사용자에게 받은 편지가 2개 있음

**When (행동)**
1. 보관함 페이지에 진입함
2. "받은 편지" 탭을 확인함 (기본 선택됨)
3. 편지 목록을 확인함
4. 관심 있는 편지를 클릭함

**Then (기대 결과)**
- 받은 편지 목록이 표시됨
- 편지 상세 페이지로 이동함

---

### 시나리오 5.2: 보낸 편지 확인

**Given (전제 조건)**
- 사용자가 보관함 페이지에 있음
- 사용자가 보낸 편지가 1개 있음

**When (행동)**
1. "보낸 편지" 탭을 클릭함

**Then (기대 결과)**
- 보낸 편지 목록이 표시됨
- 편지 카드가 표시됨

---

### 시나리오 5.3: 빈 상태

**Given (전제 조건)**
- 사용자가 보관함 페이지에 있음
- 사용자에게 받은 편지가 없음

**When (행동)**
1. 보관함 페이지에 진입함
2. "받은 편지" 탭을 확인함

**Then (기대 결과)**
- 빈 상태 메시지가 표시됨
- "편지 만들기" 버튼이 제공됨
- 사용자가 편지를 만들 수 있음

---

### 시나리오 5.4: 편지 정렬 (P1)

**Given (전제 조건)**
- 사용자가 보관함 페이지에 있음
- 사용자에게 받은 편지가 여러 개 있음

**When (행동)**
1. 정렬 옵션을 클릭함
2. "인기순"을 선택함

**Then (기대 결과)**
- 편지 목록이 좋아요 수 기준으로 정렬됨
- 목록이 업데이트됨

**참고**: P1 기능

---

### 시나리오 5.5: 편지 검색 (P1)

**Given (전제 조건)**
- 사용자가 보관함 페이지에 있음
- 사용자에게 받은 편지가 여러 개 있음

**When (행동)**
1. 검색 입력 필드에 "김서연"을 입력함

**Then (기대 결과)**
- "김서연"이 보낸 편지만 표시됨
- 검색 결과가 하이라이트됨

**참고**: P1 기능

---

## 6. 둘러보기 페이지 (`/discover`) 시나리오

### 시나리오 6.1: 편지 탐색

**Given (전제 조건)**
- 사용자가 둘러보기 페이지에 있음
- 공개된 편지가 여러 개 있음

**When (행동)**
1. 둘러보기 페이지에 진입함
2. 편지 목록을 스크롤함
3. 관심 있는 편지를 클릭함

**Then (기대 결과)**
- 편지 목록이 표시됨
- 편지 상세 페이지로 이동함

---

### 시나리오 6.2: 카테고리 필터 (P1)

**Given (전제 조건)**
- 사용자가 둘러보기 페이지에 있음
- 사용자는 팝 음악 편지를 찾고 싶어함

**When (행동)**
1. 카테고리 필터에서 "팝"을 선택함

**Then (기대 결과)**
- 팝 음악 편지만 표시됨
- 목록이 업데이트됨

**참고**: P1 기능

---

### 시나리오 6.3: 편지 검색 (P1)

**Given (전제 조건)**
- 사용자가 둘러보기 페이지에 있음

**When (행동)**
1. 검색 입력 필드에 "겨울"을 입력함

**Then (기대 결과)**
- "겨울"이 포함된 편지만 표시됨
- 검색 결과가 하이라이트됨

**참고**: P1 기능

---

## 7. 편지 상세 페이지 (`/letters/[id]`) 시나리오

### 시나리오 7.1: 편지 확인 및 좋아요

**Given (전제 조건)**
- 사용자가 편지 상세 페이지에 있음
- 사용자는 로그인되어 있음

**When (행동)**
1. 편지 상세 페이지에 진입함
2. 메시지를 읽음
3. 플레이리스트를 확인함
4. 좋아요 버튼을 클릭함

**Then (기대 결과)**
- 편지 내용이 표시됨
- 좋아요가 추가됨
- 좋아요 수가 증가함
- 하트 아이콘이 채워짐

---

### 시나리오 7.2: 플레이리스트 전체 재생

**Given (전제 조건)**
- 사용자가 편지 상세 페이지에 있음
- 사용자는 Spotify 계정을 보유하고 있음

**When (행동)**
1. "전체 재생" 버튼을 클릭함
2. 플랫폼 선택 모달에서 "Spotify"를 선택함
3. Spotify 로그인을 완료함 (처음 사용 시)

**Then (기대 결과)**
- Spotify에서 플레이리스트가 생성됨
- 플레이리스트가 재생됨

---

### 시나리오 7.3: 곡 개별 재생

**Given (전제 조건)**
- 사용자가 편지 상세 페이지에 있음
- 플레이리스트에 5곡이 있음

**When (행동)**
1. 특정 곡을 클릭함
2. 플랫폼별 링크를 확인함
3. "Spotify에서 재생"을 클릭함

**Then (기대 결과)**
- Spotify에서 해당 곡이 재생됨
- 곡 정보가 표시됨

---

### 시나리오 7.4: 편지 공유 (P1)

**Given (전제 조건)**
- 사용자가 편지 상세 페이지에 있음

**When (행동)**
1. 공유 버튼을 클릭함
2. 공유 모달에서 "링크 복사"를 선택함

**Then (기대 결과)**
- 편지 링크가 클립보드에 복사됨
- "링크가 복사되었습니다" 토스트 메시지가 표시됨

**참고**: P1 기능

---

### 시나리오 7.5: 편지 신고 (P1)

**Given (전제 조건)**
- 사용자가 편지 상세 페이지에 있음
- 사용자는 부적절한 내용을 발견함

**When (행동)**
1. 신고 버튼을 클릭함
2. 신고 사유를 선택함 ("부적절한 내용")
3. 신고 제출함

**Then (기대 결과)**
- 신고가 접수됨
- "신고가 접수되었습니다" 메시지가 표시됨

**참고**: P1 기능

---

## 8. 통합 시나리오

### 시나리오 8.1: 전체 플로우 (신규 사용자)

**Given (전제 조건)**
- 사용자가 FAN:STAGE를 처음 방문함

**When (행동)**
1. 랜딩 페이지에서 "편지 만들기" 클릭
2. 로그인 페이지에서 Google 로그인
3. 온보딩 페이지에서 닉네임 입력 및 시작
4. 편지 생성 페이지에서 곡 추가 및 메시지 작성
5. 편지 완성 및 링크 복사
6. 보관함에서 편지 확인

**Then (기대 결과)**
- 모든 단계가 순차적으로 완료됨
- 사용자가 편지를 성공적으로 생성함

---

### 시나리오 8.2: 편지 공유 및 수신

**Given (전제 조건)**
- 사용자 A가 편지를 생성함
- 사용자 B는 편지 링크를 받음

**When (행동)**
1. 사용자 A가 편지 링크를 복사함
2. 사용자 B에게 링크를 공유함
3. 사용자 B가 링크를 클릭함
4. 사용자 B가 편지 상세 페이지에서 편지를 확인함
5. 사용자 B가 좋아요를 클릭함

**Then (기대 결과)**
- 사용자 B가 편지를 확인할 수 있음
- 사용자 B가 좋아요를 추가할 수 있음
- 사용자 A의 보관함에 좋아요 수가 반영됨

---

## 엣지 케이스

### 엣지 케이스 1: 세션 만료

**Given**: 사용자가 로그인되어 있음  
**When**: 세션이 만료됨  
**Then**: 
- 로그인 페이지로 리다이렉트됨
- "세션이 만료되었습니다" 메시지 표시

### 엣지 케이스 2: 네트워크 오류

**Given**: 사용자가 편지를 생성 중임  
**When**: 네트워크 연결이 끊김  
**Then**: 
- "연결이 끊어졌습니다" 메시지 표시
- 재시도 버튼 제공
- 임시 저장 데이터 복구 (P1)

### 엣지 케이스 3: 편지 삭제된 경우

**Given**: 사용자가 편지 링크를 가지고 있음  
**When**: 편지가 삭제됨  
**Then**: 
- "삭제된 편지입니다" 메시지 표시
- 보관함으로 돌아가기 버튼 제공

---

**작성 완료일**: 2024년  
**검토 필요**: FE TEST, QA

