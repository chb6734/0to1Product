# 유저 시나리오: 편지 전송 및 수신

**기능**: 2.4 편지 전송 및 수신  
**작성자**: Athena PM  
**작성 일시**: 2024년  
**우선순위**: P0

---

## 시나리오 1: 편지 전송 (이메일)

### Given (전제 조건)
- 사용자가 편지 생성을 완료함
- 사용자는 수신자의 이메일 주소를 알고 있음
- 사용자는 편지를 전송하고 싶어함

### When (행동)
1. 사용자가 "전송하기" 버튼을 클릭함
2. 전송 방법 선택 화면에서 "이메일로 전송"을 선택함
3. 수신자 이메일 주소를 입력함
4. "전송" 버튼을 클릭함

### Then (기대 결과)
- 편지가 수신자에게 이메일로 전송됨
- "전송 완료" 메시지가 표시됨
- 편지가 "보낸 편지" 보관함에 저장됨
- 수신자가 이메일을 받음

### 성공 기준
- 편지 열람률 70% 이상
- 편지 재방문률 30% 이상

---

## 시나리오 2: 편지 전송 (링크 공유)

### Given (전제 조건)
- 사용자가 편지 생성을 완료함
- 사용자는 카카오톡, 문자, SNS 등으로 편지를 공유하고 싶어함

### When (행동)
1. 사용자가 "전송하기" 버튼을 클릭함
2. 전송 방법 선택 화면에서 "링크 공유"를 선택함
3. "링크 복사" 버튼을 클릭함
4. 링크가 클립보드에 복사됨
5. 사용자가 카카오톡, 문자, SNS 등에 링크를 붙여넣어 공유함

### Then (기대 결과)
- 편지 링크가 생성됨
- 링크가 클립보드에 복사됨
- 편지가 "보낸 편지" 보관함에 저장됨
- 수신자가 링크를 클릭하여 편지를 열람할 수 있음

---

## 시나리오 3: 편지 열람 (링크를 통한 접근)

### Given (전제 조건)
- 사용자가 편지 링크를 받음 (이메일, 카카오톡, 문자 등)
- 사용자는 로그인하지 않은 상태임

### When (행동)
1. 사용자가 편지 링크를 클릭함
2. 편지 열람 페이지가 열림
3. 사용자가 편지를 확인함
4. 사용자가 곡을 재생함 (선택적)
5. 사용자가 "내 플랫폼에 저장" 버튼을 클릭함 (선택적)

### Then (기대 결과)
- 편지가 카드 형태로 표시됨
- 모바일에서 최적화되어 표시됨
- 로그인 없이 편지를 열람할 수 있음
- 편지가 "받은 편지" 보관함에 저장됨 (로그인 시)

---

## 시나리오 4: 받은 편지 보관함 확인

### Given (전제 조건)
- 사용자가 로그인되어 있음
- 사용자가 이전에 편지를 받은 적이 있음
- 사용자는 받은 편지 보관함에 있음

### When (행동)
1. 사용자가 "받은 편지" 탭을 클릭함
2. 받은 편지 목록이 날짜별로 정렬되어 표시됨
3. 사용자가 특정 편지를 클릭함
4. 편지 상세 화면이 표시됨

### Then (기대 결과)
- 받은 편지 목록이 표시됨
- 최신 편지가 위에 표시됨
- 편지 제목, 보낸 사람, 날짜가 표시됨
- 편지를 클릭하면 상세 내용이 표시됨

---

## 시나리오 5: 보낸 편지 보관함 확인

### Given (전제 조건)
- 사용자가 로그인되어 있음
- 사용자가 이전에 편지를 보낸 적이 있음
- 사용자는 보낸 편지 보관함에 있음

### When (행동)
1. 사용자가 "보낸 편지" 탭을 클릭함
2. 보낸 편지 목록이 날짜별로 정렬되어 표시됨
3. 사용자가 특정 편지를 클릭함
4. 편지 상세 화면이 표시됨

### Then (기대 결과)
- 보낸 편지 목록이 표시됨
- 최신 편지가 위에 표시됨
- 편지 제목, 수신자, 날짜가 표시됨
- 편지를 클릭하면 상세 내용이 표시됨

---

## 시나리오 6: 편지 검색

### Given (전제 조건)
- 사용자가 로그인되어 있음
- 사용자가 받은 편지 또는 보낸 편지 보관함에 있음
- 사용자는 특정 편지를 찾고 싶어함

### When (행동)
1. 사용자가 검색창에 검색어를 입력함 (보낸 사람 이름 또는 곡 제목)
2. 검색 결과가 실시간으로 필터링됨
3. 사용자가 검색 결과에서 원하는 편지를 클릭함

### Then (기대 결과)
- 검색어와 일치하는 편지가 표시됨
- 검색 결과가 하이라이트됨
- 편지를 클릭하면 상세 내용이 표시됨

---

## 엣지 케이스

### 엣지 케이스 1: 잘못된 이메일 주소 입력
**Given**: 사용자가 편지를 전송하려고 함  
**When**: 잘못된 형식의 이메일 주소를 입력함  
**Then**: 
- "올바른 이메일 주소를 입력해주세요" 에러 메시지가 표시됨
- 전송 버튼이 비활성화됨

### 엣지 케이스 2: 편지 링크 만료
**Given**: 사용자가 오래된 편지 링크를 클릭함  
**When**: 편지 링크가 만료됨 (예: 1년 경과)  
**Then**: 
- "만료된 편지입니다" 메시지가 표시됨
- 보낸 사람에게 새 링크를 요청하도록 안내됨

### 엣지 케이스 3: 편지 열람 실패 (네트워크 오류)
**Given**: 사용자가 편지 링크를 클릭함  
**When**: 네트워크 오류가 발생함  
**Then**: 
- "연결에 실패했습니다" 메시지가 표시됨
- 재시도 버튼이 제공됨

### 엣지 케이스 4: 검색 결과 없음
**Given**: 사용자가 편지를 검색함  
**When**: 검색어와 일치하는 편지가 없음  
**Then**: 
- "검색 결과가 없습니다" 메시지가 표시됨
- 다른 검색어를 시도하도록 안내됨

### 엣지 케이스 5: 편지 전송 실패
**Given**: 사용자가 편지를 전송하려고 함  
**When**: 전송 중 오류가 발생함 (서버 오류, 이메일 전송 실패 등)  
**Then**: 
- "전송에 실패했습니다" 메시지가 표시됨
- 재시도 버튼이 제공됨
- 링크 공유 방법이 대안으로 제시됨

---

## 사용자 변화

**Before**: 음악 링크는 대화방에서 묻힘, 다시 찾기 어려움  
**After**: 받은 편지를 영구 보관, 날짜별/사람별로 정리, 추억으로 인식  
**변화 지표**: 편지 열람률 70% 이상, 편지 재방문률 30% 이상

---

## 레버리지 포인트 활용

- 영구 보관으로 사용자 리텐션 향상
- 바이럴 메커니즘: 편지를 받은 사람이 자연스럽게 사용자로 전환

