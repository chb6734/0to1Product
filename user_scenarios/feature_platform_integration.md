# 유저 시나리오: 플랫폼 연동 및 플레이리스트 저장

**기능**: 2.3 플랫폼 연동  
**작성자**: Athena PM  
**작성 일시**: 2024년  
**우선순위**: P0

---

## 시나리오 1: 편지 받은 사용자가 플레이리스트 저장 (Spotify)

### Given (전제 조건)
- 사용자가 편지를 받음 (링크를 통해 접근)
- 사용자는 Spotify 계정을 보유하고 있음
- 사용자는 편지를 열람함
- 사용자는 편지의 곡들을 자신의 Spotify에 저장하고 싶어함

### When (행동)
1. 사용자가 편지 열람 화면에서 "내 플랫폼에 저장" 버튼을 클릭함
2. 플랫폼 선택 화면에서 "Spotify"를 선택함
3. Spotify 로그인 화면이 표시됨 (처음 사용 시)
4. 사용자가 Spotify 계정으로 로그인함
5. 권한 승인을 완료함
6. 플레이리스트 저장이 진행됨

### Then (기대 결과)
- 플레이리스트가 Spotify에 생성됨
- 편지의 모든 곡이 플레이리스트에 포함됨
- "저장 완료" 메시지가 표시됨
- Spotify에서 플레이리스트를 확인할 수 있는 링크가 제공됨

### 성공 기준
- 플레이리스트 저장 성공률 60% 이상
- 저장 완료까지 10초 이내

---

## 시나리오 2: 편지 받은 사용자가 플레이리스트 저장 (YouTube Music)

### Given (전제 조건)
- 사용자가 편지를 받음
- 사용자는 YouTube Music 계정을 보유하고 있음
- 사용자는 편지를 열람함

### When (행동)
1. 사용자가 "내 플랫폼에 저장" 버튼을 클릭함
2. 플랫폼 선택 화면에서 "YouTube Music"을 선택함
3. YouTube Music 로그인 화면이 표시됨 (처음 사용 시)
4. 사용자가 Google 계정으로 로그인함
5. 권한 승인을 완료함
6. 플레이리스트 저장이 진행됨

### Then (기대 결과)
- 플레이리스트가 YouTube Music에 생성됨
- 편지의 모든 곡이 플레이리스트에 포함됨
- "저장 완료" 메시지가 표시됨

---

## 시나리오 3: 편지 받은 사용자가 플레이리스트 저장 (Apple Music)

### Given (전제 조건)
- 사용자가 편지를 받음
- 사용자는 Apple Music 계정을 보유하고 있음
- 사용자는 편지를 열람함
- 사용자는 iOS/Safari 브라우저를 사용함

### When (행동)
1. 사용자가 "내 플랫폼에 저장" 버튼을 클릭함
2. 플랫폼 선택 화면에서 "Apple Music"을 선택함
3. Apple Music 인증 화면이 표시됨 (처음 사용 시)
4. 사용자가 Apple ID로 로그인함
5. 권한 승인을 완료함
6. 플레이리스트 저장이 진행됨

### Then (기대 결과)
- 플레이리스트가 Apple Music에 생성됨
- 편지의 모든 곡이 플레이리스트에 포함됨
- "저장 완료" 메시지가 표시됨

---

## 시나리오 4: 곡 매칭 실패 처리

### Given (전제 조건)
- 사용자가 편지를 받음
- 사용자가 플랫폼에 저장을 시도함
- 편지에 포함된 곡 중 일부가 선택한 플랫폼에 없음

### When (행동)
1. 사용자가 "내 플랫폼에 저장" 버튼을 클릭함
2. 플랫폼을 선택하고 저장을 진행함
3. 곡 매칭 과정에서 일부 곡이 매칭되지 않음

### Then (기대 결과)
- 매칭된 곡들은 플레이리스트에 저장됨
- 매칭 실패한 곡 목록이 표시됨
- "X곡이 저장되었습니다. Y곡은 찾을 수 없습니다" 메시지가 표시됨
- 대안 곡이 제시됨 (선택적)

---

## 시나리오 5: 이미 로그인한 사용자의 플레이리스트 저장

### Given (전제 조건)
- 사용자가 이전에 플랫폼에 로그인한 적이 있음
- 사용자가 편지를 받음
- 사용자는 편지를 열람함

### When (행동)
1. 사용자가 "내 플랫폼에 저장" 버튼을 클릭함
2. 이전에 사용한 플랫폼이 자동으로 선택됨
3. 추가 로그인 없이 저장이 진행됨

### Then (기대 결과)
- 플레이리스트가 즉시 저장됨
- 로그인 과정 없이 저장 완료됨
- 저장 시간이 단축됨

---

## 엣지 케이스

### 엣지 케이스 1: 플랫폼 로그인 실패
**Given**: 사용자가 플랫폼 로그인을 시도함  
**When**: 로그인이 실패함 (네트워크 오류, 계정 오류 등)  
**Then**: 
- "로그인에 실패했습니다" 메시지가 표시됨
- 재시도 버튼이 제공됨
- 다른 플랫폼을 선택할 수 있음

### 엣지 케이스 2: 권한 승인 거부
**Given**: 사용자가 플랫폼 로그인을 완료함  
**When**: 권한 승인을 거부함  
**Then**: 
- "권한이 필요합니다" 메시지가 표시됨
- 권한 승인 방법이 안내됨
- 다른 플랫폼을 선택할 수 있음

### 엣지 케이스 3: 모든 곡 매칭 실패
**Given**: 사용자가 플레이리스트 저장을 시도함  
**When**: 편지의 모든 곡이 플랫폼에서 찾을 수 없음  
**Then**: 
- "저장할 수 있는 곡이 없습니다" 메시지가 표시됨
- 다른 플랫폼을 시도하도록 안내됨

### 엣지 케이스 4: 저장 중 네트워크 오류
**Given**: 사용자가 플레이리스트 저장을 진행함  
**When**: 저장 중 네트워크 오류가 발생함  
**Then**: 
- "저장에 실패했습니다" 메시지가 표시됨
- 재시도 버튼이 제공됨
- 부분 저장된 곡은 유지됨

### 엣지 케이스 5: 멜론 사용자 (API 부재)
**Given**: 사용자가 멜론을 사용함  
**When**: 사용자가 플랫폼 선택 화면을 확인함  
**Then**: 
- 멜론 옵션이 없음
- "멜론은 곡 제목과 아티스트를 복사하여 직접 추가해주세요" 안내 메시지가 표시됨
- 수동 입력 가이드가 제공됨

---

## 사용자 변화

**Before**: 플랫폼이 다르면 음악 공유 불가, 링크만 받고 끝  
**After**: 플랫폼 상관없이 음악을 받아 자신의 플랫폼에 저장, 음악을 "경험"으로 인식  
**변화 지표**: 플레이리스트 저장 성공률 60% 이상, 저장 완료 시간 10초 이내

---

## 레버리지 포인트 활용

- **핵심 레버리지**: 플랫폼 중립성의 완전한 구현
- 마케팅 메시지의 핵심: "어떤 플랫폼을 쓰든 음악을 공유하세요"
- 경쟁자 모방 어려움: 기술적 진입장벽

