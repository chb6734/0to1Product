# 테스트 시나리오: 사용자 인증 및 프로필

**기능**: 2.1 사용자 인증 및 프로필  
**작성자**: Taylor FE TEST  
**작성 일시**: 2024년  
**기반**: `user_scenarios/feature_auth.md`

---

## 테스트 목표

사용자 인증 및 프로필 기능의 모든 유저 시나리오를 검증하여 다음을 확인:
- 소셜 로그인을 통한 가입 및 로그인 정상 동작
- 프로필 수정 기능 정상 동작
- 모든 엣지 케이스 적절히 처리

---

## 테스트 케이스

### TC-AUTH-001: 신규 사용자 가입 (Google 소셜 로그인)

**시나리오**: 신규 사용자가 Google 계정으로 가입함

**Given**:
- 사용자가 FAN:STAGE 웹사이트에 처음 방문함
- 사용자는 Google 계정을 보유하고 있음

**When**:
1. "시작하기" 버튼 클릭
2. "Google로 로그인" 선택
3. Google 인증 완료
4. 닉네임 입력 (예: "testuser")
5. 프로필 이미지 선택 (선택적)
6. "완료" 버튼 클릭

**Then**:
- 사용자 계정이 생성됨
- 메인 화면으로 리다이렉트됨
- 사용자 프로필이 저장됨
- 다음 방문 시 자동 로그인됨

**검증 포인트**:
- 가입 완료까지 30초 이내
- 사용자 정보가 DB에 저장됨
- 세션이 생성됨

---

### TC-AUTH-002: 신규 사용자 가입 (Kakao 소셜 로그인)

**시나리오**: 신규 사용자가 Kakao 계정으로 가입함

**Given**:
- 사용자가 FAN:STAGE 웹사이트에 처음 방문함
- 사용자는 Kakao 계정을 보유하고 있음

**When**:
1. "시작하기" 버튼 클릭
2. "카카오로 로그인" 선택
3. Kakao 인증 완료
4. 닉네임 입력
5. "완료" 버튼 클릭

**Then**:
- 사용자 계정이 생성됨
- 메인 화면으로 리다이렉트됨

**검증 포인트**:
- Kakao OAuth 인증 정상 동작
- 사용자 정보 정확히 수집

---

### TC-AUTH-003: 신규 사용자 가입 (Apple 소셜 로그인)

**시나리오**: 신규 사용자가 Apple 계정으로 가입함

**Given**:
- 사용자가 FAN:STAGE 웹사이트에 처음 방문함
- 사용자는 Apple 계정을 보유하고 있음

**When**:
1. "시작하기" 버튼 클릭
2. "Apple로 로그인" 선택
3. Apple 인증 완료
4. 닉네임 입력
5. "완료" 버튼 클릭

**Then**:
- 사용자 계정이 생성됨
- 메인 화면으로 리다이렉트됨

**검증 포인트**:
- Apple Sign-In 정상 동작
- 프라이버시 보호 모드 처리

---

### TC-AUTH-004: 기존 사용자 로그인

**시나리오**: 기존 사용자가 로그인함

**Given**:
- 사용자가 이전에 FAN:STAGE에 가입한 적이 있음
- 사용자는 로그아웃 상태임

**When**:
1. "로그인" 버튼 클릭
2. 이전에 사용한 소셜 로그인 선택
3. 소셜 로그인 인증 완료

**Then**:
- 사용자가 자동으로 로그인됨
- 메인 화면으로 리다이렉트됨
- 사용자의 프로필 정보가 표시됨

**검증 포인트**:
- 기존 사용자 정보 조회 정상
- 세션 생성 정상

---

### TC-AUTH-005: 프로필 수정

**시나리오**: 사용자가 프로필을 수정함

**Given**:
- 사용자가 로그인되어 있음
- 사용자가 프로필 설정 페이지에 있음

**When**:
1. "프로필 수정" 버튼 클릭
2. 닉네임 변경 (예: "newusername")
3. 프로필 이미지 변경
4. "저장" 버튼 클릭

**Then**:
- 프로필 정보가 업데이트됨
- 변경된 정보가 즉시 반영됨
- 성공 메시지가 표시됨

**검증 포인트**:
- DB 업데이트 정상
- UI 즉시 반영
- 이미지 업로드 정상

---

## 엣지 케이스 테스트

### TC-AUTH-E001: 소셜 로그인 실패 (네트워크 오류)

**시나리오**: 소셜 로그인 중 네트워크 오류 발생

**Given**: 사용자가 소셜 로그인을 시도함

**When**: 네트워크 오류가 발생함

**Then**:
- "연결에 실패했습니다" 에러 메시지 표시
- 재시도 버튼 제공
- 다른 소셜 로그인 옵션 선택 가능

**검증 포인트**:
- 에러 핸들링 정상
- 사용자에게 명확한 피드백 제공

---

### TC-AUTH-E002: 중복 닉네임

**시나리오**: 이미 사용 중인 닉네임 입력

**Given**: 사용자가 닉네임을 입력함

**When**: 이미 사용 중인 닉네임을 입력함

**Then**:
- "이미 사용 중인 닉네임입니다" 메시지 표시
- 다른 닉네임을 입력하도록 안내

**검증 포인트**:
- 닉네임 중복 체크 정상 동작
- 실시간 검증 (debounce 적용)

---

### TC-AUTH-E003: 닉네임 미입력

**시나리오**: 닉네임을 입력하지 않고 완료 버튼 클릭

**Given**: 사용자가 닉네임 입력 화면에 있음

**When**: 닉네임을 입력하지 않고 "완료" 버튼 클릭

**Then**:
- "닉네임을 입력해주세요" 에러 메시지 표시
- 닉네임 입력 필드에 포커스 이동

**검증 포인트**:
- 필수 입력 검증 정상
- 접근성 고려 (포커스 이동)

---

## 테스트 커버리지 목표

- **단위 테스트**: 80% 이상
- **통합 테스트**: 주요 플로우 100%
- **엣지 케이스**: 모든 엣지 케이스 테스트

---

## 테스트 우선순위

- **P0 (필수)**: TC-AUTH-001, TC-AUTH-004, TC-AUTH-E003
- **P1 (중요)**: TC-AUTH-002, TC-AUTH-003, TC-AUTH-005, TC-AUTH-E001, TC-AUTH-E002

---

## 다음 단계

1. 단위 테스트 작성 (RED)
2. 통합 테스트 작성
3. E2E 테스트 작성

