# FE Engineer: 로그인 플로우 문제 분석 및 수정

**작성자**: Sam FE Engineer  
**작성 일시**: 2024년  
**작업 내용**: 로그인 플로우 문제 분석 및 feature_auth.md 시나리오 구현

---

## 문제 분석

### 발견된 문제
- 로그인 버튼 클릭 시 홈으로 돌아옴
- 온보딩 페이지로 리다이렉트되지 않음
- 로그인 상태가 제대로 유지되지 않음

### 원인 분석
1. **상태 업데이트 타이밍 문제**
   - `setUser`와 `setIsAuthenticated`가 비동기로 업데이트됨
   - `useEffect`가 상태 업데이트 전에 실행될 수 있음

2. **MockUser 타입 불일치**
   - `MockUser` 타입에서 `nickname`이 필수였음
   - `createMockUser`에서 `undefined`를 전달해도 타입 오류 발생 가능

3. **리다이렉트 로직 문제**
   - 로그인 페이지에서 이미 로그인된 상태 체크 부족
   - 메인 페이지에서 인증 체크 로직 없음

---

## 해결 방법

### 1. MockUser 타입 수정 ✅
- `nickname`을 선택적 필드로 변경 (`nickname?: string`)

### 2. 로그인 플로우 로그 추가 ✅
- `useAuth` 훅에 상세 로그 추가
- `LoginPage`에 상태 체크 로그 추가
- MSW 핸들러에 로그 추가

### 3. 리다이렉트 로직 개선 필요
- 로그인 페이지에서 이미 로그인된 상태 체크
- 상태 업데이트 후 리다이렉트 보장

---

## 다음 단계

1. 브라우저 콘솔에서 로그 확인
2. 로그인 버튼 클릭 시 로그 흐름 확인
3. 문제 지점 파악 후 수정

---

**작업 완료**: FE Engineer가 로그인 플로우 문제 분석 및 로그 추가 완료  
**다음 작업**: 브라우저 콘솔 로그 확인 후 추가 수정

